{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { Web3Provider } from \"@ethersproject/providers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Web3Modal from \"web3modal\"; // Enter a valid infura key here to avoid being rate limited\n// You can get a key for free at https://infura.io/register\n\nconst INFURA_ID = \"INVALID_INFURA_KEY\";\nconst NETWORK = \"mainnet\";\n\nfunction useWeb3Modal() {\n  _s();\n\n  let config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  const [provider, setProvider] = useState();\n  const [autoLoaded, setAutoLoaded] = useState(false);\n  const {\n    autoLoad = true,\n    infuraId = INFURA_ID,\n    network = NETWORK\n  } = config; // Web3Modal also supports many other wallets.\n  // You can see other options at https://github.com/Web3Modal/web3modal\n\n  const web3Modal = useMemo(() => {\n    return new Web3Modal({\n      network,\n      cacheProvider: true,\n      providerOptions: {\n        walletconnect: {\n          package: WalletConnectProvider,\n          options: {\n            infuraId\n          }\n        }\n      }\n    });\n  }, [infuraId, network]); // Open wallet selection modal.\n\n  const loadWeb3Modal = useCallback(async () => {\n    const newProvider = await web3Modal.connect();\n    setProvider(new Web3Provider(newProvider));\n  }, [web3Modal]);\n  const logoutOfWeb3Modal = useCallback(async function () {\n    web3Modal.clearCachedProvider();\n    window.location.reload();\n  }, [web3Modal]); // If autoLoad is enabled and the the wallet had been loaded before, load it automatically now.\n\n  useEffect(() => {\n    if (autoLoad && !autoLoaded && web3Modal.cachedProvider) {\n      loadWeb3Modal();\n      setAutoLoaded(true);\n    }\n  }, [autoLoad, autoLoaded, loadWeb3Modal, setAutoLoaded, web3Modal.cachedProvider]);\n  return [provider, loadWeb3Modal, logoutOfWeb3Modal];\n}\n\n_s(useWeb3Modal, \"K3jUZcTyZdEqTn83Ynyh21OvMnE=\");\n\nexport default useWeb3Modal;","map":{"version":3,"sources":["/Users/karel/Documents/eth/my-eth-app/packages/react-app/src/hooks/useWeb3Modal.ts"],"names":["Web3Provider","WalletConnectProvider","useCallback","useEffect","useMemo","useState","Web3Modal","INFURA_ID","NETWORK","useWeb3Modal","config","provider","setProvider","autoLoaded","setAutoLoaded","autoLoad","infuraId","network","web3Modal","cacheProvider","providerOptions","walletconnect","package","options","loadWeb3Modal","newProvider","connect","logoutOfWeb3Modal","clearCachedProvider","window","location","reload","cachedProvider"],"mappings":";;AAAA,SAASA,YAAT,QAA6B,0BAA7B;AACA,OAAOC,qBAAP,MAAkC,8BAAlC;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,OAAjC,EAA0CC,QAA1C,QAA0D,OAA1D;AACA,OAAOC,SAAP,MAAsB,WAAtB,C,CAEA;AACA;;AACA,MAAMC,SAAS,GAAG,oBAAlB;AAEA,MAAMC,OAAO,GAAG,SAAhB;;AAEA,SAASC,YAAT,GAMc;AAAA;;AAAA,MALZC,MAKY,uEADR,EACQ;AACZ,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BP,QAAQ,EAAxC;AACA,QAAM,CAACQ,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC,KAAD,CAA5C;AACA,QAAM;AAAEU,IAAAA,QAAQ,GAAG,IAAb;AAAmBC,IAAAA,QAAQ,GAAGT,SAA9B;AAAyCU,IAAAA,OAAO,GAAGT;AAAnD,MAA+DE,MAArE,CAHY,CAKZ;AACA;;AACA,QAAMQ,SAAS,GAAGd,OAAO,CAAC,MAAM;AAC9B,WAAO,IAAIE,SAAJ,CAAc;AACnBW,MAAAA,OADmB;AAEnBE,MAAAA,aAAa,EAAE,IAFI;AAGnBC,MAAAA,eAAe,EAAE;AACfC,QAAAA,aAAa,EAAE;AACbC,UAAAA,OAAO,EAAErB,qBADI;AAEbsB,UAAAA,OAAO,EAAE;AACPP,YAAAA;AADO;AAFI;AADA;AAHE,KAAd,CAAP;AAYD,GAbwB,EAatB,CAACA,QAAD,EAAWC,OAAX,CAbsB,CAAzB,CAPY,CAsBZ;;AACA,QAAMO,aAAa,GAAGtB,WAAW,CAAC,YAAY;AAC5C,UAAMuB,WAAW,GAAG,MAAMP,SAAS,CAACQ,OAAV,EAA1B;AACAd,IAAAA,WAAW,CAAC,IAAIZ,YAAJ,CAAiByB,WAAjB,CAAD,CAAX;AACD,GAHgC,EAG9B,CAACP,SAAD,CAH8B,CAAjC;AAKA,QAAMS,iBAAiB,GAAGzB,WAAW,CACnC,kBAAiB;AACfgB,IAAAA,SAAS,CAACU,mBAAV;AACAC,IAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,GAJkC,EAKnC,CAACb,SAAD,CALmC,CAArC,CA5BY,CAoCZ;;AACAf,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIY,QAAQ,IAAI,CAACF,UAAb,IAA2BK,SAAS,CAACc,cAAzC,EAAyD;AACvDR,MAAAA,aAAa;AACbV,MAAAA,aAAa,CAAC,IAAD,CAAb;AACD;AACF,GALQ,EAKN,CACDC,QADC,EAEDF,UAFC,EAGDW,aAHC,EAIDV,aAJC,EAKDI,SAAS,CAACc,cALT,CALM,CAAT;AAaA,SAAO,CAACrB,QAAD,EAAWa,aAAX,EAA0BG,iBAA1B,CAAP;AACD;;GAzDQlB,Y;;AA2DT,eAAeA,YAAf","sourcesContent":["import { Web3Provider } from \"@ethersproject/providers\";\nimport WalletConnectProvider from \"@walletconnect/web3-provider\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport Web3Modal from \"web3modal\";\n\n// Enter a valid infura key here to avoid being rate limited\n// You can get a key for free at https://infura.io/register\nconst INFURA_ID = \"INVALID_INFURA_KEY\";\n\nconst NETWORK = \"mainnet\";\n\nfunction useWeb3Modal(\n  config: {\n    autoLoad?: boolean;\n    infuraId?: string;\n    network?: string;\n  } = {}\n) : [pasd:any]{\n  const [provider, setProvider] = useState<Web3Provider | undefined>();\n  const [autoLoaded, setAutoLoaded] = useState(false);\n  const { autoLoad = true, infuraId = INFURA_ID, network = NETWORK } = config;\n\n  // Web3Modal also supports many other wallets.\n  // You can see other options at https://github.com/Web3Modal/web3modal\n  const web3Modal = useMemo(() => {\n    return new Web3Modal({\n      network,\n      cacheProvider: true,\n      providerOptions: {\n        walletconnect: {\n          package: WalletConnectProvider,\n          options: {\n            infuraId\n          }\n        }\n      }\n    });\n  }, [infuraId, network]);\n\n  // Open wallet selection modal.\n  const loadWeb3Modal = useCallback(async () => {\n    const newProvider = await web3Modal.connect();\n    setProvider(new Web3Provider(newProvider));\n  }, [web3Modal]);\n\n  const logoutOfWeb3Modal = useCallback(\n    async function() {\n      web3Modal.clearCachedProvider();\n      window.location.reload();\n    },\n    [web3Modal]\n  );\n\n  // If autoLoad is enabled and the the wallet had been loaded before, load it automatically now.\n  useEffect(() => {\n    if (autoLoad && !autoLoaded && web3Modal.cachedProvider) {\n      loadWeb3Modal();\n      setAutoLoaded(true);\n    }\n  }, [\n    autoLoad,\n    autoLoaded,\n    loadWeb3Modal,\n    setAutoLoaded,\n    web3Modal.cachedProvider\n  ]);\n\n  return [provider, loadWeb3Modal, logoutOfWeb3Modal];\n}\n\nexport default useWeb3Modal;\n"]},"metadata":{},"sourceType":"module"}