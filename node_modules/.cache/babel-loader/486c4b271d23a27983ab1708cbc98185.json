{"ast":null,"code":"/*\n\tISC License\n\n\tCopyright (c) 2019, Pierre-Louis Despaigne\n\n\tPermission to use, copy, modify, and/or distribute this software for any\n\tpurpose with or without fee is hereby granted, provided that the above\n\tcopyright notice and this permission notice appear in all copies.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n\tWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n\tANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n\tWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n\tACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n\tOR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n*/\nconst multiC = require('multicodec');\n\nconst multiH = require('multihashes');\n\nconst {\n  hexStringToBuffer,\n  profiles\n} = require('./profiles');\n\nconst {\n  cidForWeb,\n  cidV0ToV1Base32\n} = require('./helpers');\n\nmodule.exports = {\n  //export some helpers functions\n  helpers: {\n    cidForWeb,\n    cidV0ToV1Base32\n  },\n\n  /**\n  * Decode a Content Hash.\n  * @param {string} hash an hex string containing a content hash\n  * @return {string} the decoded content\n  */\n  decode: function (contentHash) {\n    const buffer = hexStringToBuffer(contentHash);\n    const codec = multiC.getCodec(buffer);\n    const value = multiC.rmPrefix(buffer);\n    let profile = profiles[codec];\n    if (!profile) profile = profiles['default'];\n    return profile.decode(value);\n  },\n\n  /**\n  * Encode an IPFS address into a content hash\n  * @param {string} ipfsHash string containing an IPFS address\n  * @return {string} the resulting content hash\n  */\n  fromIpfs: function (ipfsHash) {\n    return this.encode('ipfs-ns', ipfsHash);\n  },\n\n  /**\n  * Encode a Skylink into a content hash\n  * @param {string} skylink string containing a Skylink\n  * @return {string} the resulting content hash\n  */\n  fromSkylink: function (skylink) {\n    return this.encode('skynet-ns', skylink);\n  },\n\n  /**\n  * Encode a Swarm address into a content hash\n  * @param {string} swarmHash string containing a Swarm address\n  * @return {string} the resulting content hash\n  */\n  fromSwarm: function (swarmHash) {\n    return this.encode('swarm-ns', swarmHash);\n  },\n\n  /**\n  * Encode a arweave address into a content hash\n  * @param {string} swarmHash string containing a arweave address\n  * @return {string} the resulting content hash\n  */\n  fromArweave: function (arweave) {\n    return this.encode('arweave-ns', arweave);\n  },\n\n  /**\n  * General purpose encoding function\n   * @param {string} codec \n   * @param {string} value \n   */\n  encode: function (codec, value) {\n    let profile = profiles[codec];\n    if (!profile) profile = profiles['default'];\n    const encodedValue = profile.encode(value);\n    return multiH.toHexString(multiC.addPrefix(codec, encodedValue));\n  },\n\n  /**\n  * Extract the codec of a content hash\n  * @param {string} hash hex string containing a content hash\n  * @return {string} the extracted codec\n  */\n  getCodec: function (hash) {\n    let buffer = hexStringToBuffer(hash);\n    return multiC.getCodec(buffer);\n  }\n};","map":{"version":3,"sources":["/Users/karel/Documents/eth/my-eth-app/node_modules/@ensdomains/content-hash/src/index.js"],"names":["multiC","require","multiH","hexStringToBuffer","profiles","cidForWeb","cidV0ToV1Base32","module","exports","helpers","decode","contentHash","buffer","codec","getCodec","value","rmPrefix","profile","fromIpfs","ipfsHash","encode","fromSkylink","skylink","fromSwarm","swarmHash","fromArweave","arweave","encodedValue","toHexString","addPrefix","hash"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,YAAD,CAAtB;;AACA,MAAMC,MAAM,GAAGD,OAAO,CAAC,aAAD,CAAtB;;AAEA,MAAM;AAAEE,EAAAA,iBAAF;AAAqBC,EAAAA;AAArB,IAAkCH,OAAO,CAAC,YAAD,CAA/C;;AACA,MAAM;AAAEI,EAAAA,SAAF;AAAaC,EAAAA;AAAb,IAAiCL,OAAO,CAAC,WAAD,CAA9C;;AAEAM,MAAM,CAACC,OAAP,GAAiB;AAEhB;AACAC,EAAAA,OAAO,EAAE;AACRJ,IAAAA,SADQ;AAERC,IAAAA;AAFQ,GAHO;;AAQhB;AACD;AACA;AACA;AACA;AACCI,EAAAA,MAAM,EAAE,UAAUC,WAAV,EAAuB;AAC9B,UAAMC,MAAM,GAAGT,iBAAiB,CAACQ,WAAD,CAAhC;AACA,UAAME,KAAK,GAAGb,MAAM,CAACc,QAAP,CAAgBF,MAAhB,CAAd;AACA,UAAMG,KAAK,GAAGf,MAAM,CAACgB,QAAP,CAAgBJ,MAAhB,CAAd;AACA,QAAIK,OAAO,GAAGb,QAAQ,CAACS,KAAD,CAAtB;AACA,QAAI,CAACI,OAAL,EAAcA,OAAO,GAAGb,QAAQ,CAAC,SAAD,CAAlB;AACd,WAAOa,OAAO,CAACP,MAAR,CAAeK,KAAf,CAAP;AACA,GApBe;;AAsBhB;AACD;AACA;AACA;AACA;AACCG,EAAAA,QAAQ,EAAE,UAAUC,QAAV,EAAoB;AAC7B,WAAO,KAAKC,MAAL,CAAY,SAAZ,EAAuBD,QAAvB,CAAP;AACA,GA7Be;;AA+BhB;AACD;AACA;AACA;AACA;AACCE,EAAAA,WAAW,EAAE,UAAUC,OAAV,EAAmB;AAC/B,WAAO,KAAKF,MAAL,CAAY,WAAZ,EAAyBE,OAAzB,CAAP;AACA,GAtCe;;AAwChB;AACD;AACA;AACA;AACA;AACCC,EAAAA,SAAS,EAAE,UAAUC,SAAV,EAAqB;AAC/B,WAAO,KAAKJ,MAAL,CAAY,UAAZ,EAAwBI,SAAxB,CAAP;AACA,GA/Ce;;AAiDb;AACJ;AACA;AACA;AACA;AACIC,EAAAA,WAAW,EAAE,UAASC,OAAT,EAAkB;AAC3B,WAAO,KAAKN,MAAL,CAAY,YAAZ,EAA0BM,OAA1B,CAAP;AACH,GAxDY;;AA0DhB;AACD;AACA;AACA;AACA;AACCN,EAAAA,MAAM,EAAE,UAAUP,KAAV,EAAiBE,KAAjB,EAAwB;AAC/B,QAAIE,OAAO,GAAGb,QAAQ,CAACS,KAAD,CAAtB;AACA,QAAI,CAACI,OAAL,EAAcA,OAAO,GAAGb,QAAQ,CAAC,SAAD,CAAlB;AACd,UAAMuB,YAAY,GAAGV,OAAO,CAACG,MAAR,CAAeL,KAAf,CAArB;AACA,WAAOb,MAAM,CAAC0B,WAAP,CAAmB5B,MAAM,CAAC6B,SAAP,CAAiBhB,KAAjB,EAAwBc,YAAxB,CAAnB,CAAP;AACA,GApEe;;AAsEhB;AACD;AACA;AACA;AACA;AACCb,EAAAA,QAAQ,EAAE,UAAUgB,IAAV,EAAgB;AACzB,QAAIlB,MAAM,GAAGT,iBAAiB,CAAC2B,IAAD,CAA9B;AACA,WAAO9B,MAAM,CAACc,QAAP,CAAgBF,MAAhB,CAAP;AACA;AA9Ee,CAAjB","sourcesContent":["/*\n\tISC License\n\n\tCopyright (c) 2019, Pierre-Louis Despaigne\n\n\tPermission to use, copy, modify, and/or distribute this software for any\n\tpurpose with or without fee is hereby granted, provided that the above\n\tcopyright notice and this permission notice appear in all copies.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\n\tWITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\n\tMERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\n\tANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\n\tWHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\n\tACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\n\tOR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\n*/\n\nconst multiC = require('multicodec');\nconst multiH = require('multihashes');\n\nconst { hexStringToBuffer, profiles } = require('./profiles');\nconst { cidForWeb, cidV0ToV1Base32 } = require('./helpers');\n\nmodule.exports = {\n\n\t//export some helpers functions\n\thelpers: {\n\t\tcidForWeb,\n\t\tcidV0ToV1Base32,\n\t},\n\n\t/**\n\t* Decode a Content Hash.\n\t* @param {string} hash an hex string containing a content hash\n\t* @return {string} the decoded content\n\t*/\n\tdecode: function (contentHash) {\n\t\tconst buffer = hexStringToBuffer(contentHash);\n\t\tconst codec = multiC.getCodec(buffer);\n\t\tconst value = multiC.rmPrefix(buffer);\n\t\tlet profile = profiles[codec];\n\t\tif (!profile) profile = profiles['default'];\n\t\treturn profile.decode(value);\n\t},\n\n\t/**\n\t* Encode an IPFS address into a content hash\n\t* @param {string} ipfsHash string containing an IPFS address\n\t* @return {string} the resulting content hash\n\t*/\n\tfromIpfs: function (ipfsHash) {\n\t\treturn this.encode('ipfs-ns', ipfsHash);\n\t},\n\n\t/**\n\t* Encode a Skylink into a content hash\n\t* @param {string} skylink string containing a Skylink\n\t* @return {string} the resulting content hash\n\t*/\n\tfromSkylink: function (skylink) {\n\t\treturn this.encode('skynet-ns', skylink);\n\t},\n\n\t/**\n\t* Encode a Swarm address into a content hash\n\t* @param {string} swarmHash string containing a Swarm address\n\t* @return {string} the resulting content hash\n\t*/\n\tfromSwarm: function (swarmHash) {\n\t\treturn this.encode('swarm-ns', swarmHash);\n\t},\n\n    /**\n\t* Encode a arweave address into a content hash\n\t* @param {string} swarmHash string containing a arweave address\n\t* @return {string} the resulting content hash\n\t*/\n    fromArweave: function(arweave) {\n        return this.encode('arweave-ns', arweave);\n    },\n\n\t/**\n\t* General purpose encoding function\n  * @param {string} codec \n  * @param {string} value \n  */\n\tencode: function (codec, value) {\n\t\tlet profile = profiles[codec];\n\t\tif (!profile) profile = profiles['default'];\n\t\tconst encodedValue = profile.encode(value);\n\t\treturn multiH.toHexString(multiC.addPrefix(codec, encodedValue))\n\t},\n\n\t/**\n\t* Extract the codec of a content hash\n\t* @param {string} hash hex string containing a content hash\n\t* @return {string} the extracted codec\n\t*/\n\tgetCodec: function (hash) {\n\t\tlet buffer = hexStringToBuffer(hash);\n\t\treturn multiC.getCodec(buffer);\n\t},\n}\n"]},"metadata":{},"sourceType":"script"}