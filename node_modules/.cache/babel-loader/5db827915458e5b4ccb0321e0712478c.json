{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _ens = require(\"./ens\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _address = require(\"./utils/address.js\");\n\nvar _Loader = _interopRequireDefault(require(\"./Loader.js\"));\n\nvar _Blockies = require(\"./Blockies.js\");\n\nvar _warning = _interopRequireDefault(require(\"./assets/warning.svg\"));\n\nrequire(\"./style.css\");\n\nfunction _getRequireWildcardCache(nodeInterop) {\n  if (typeof WeakMap !== \"function\") return null;\n  var cacheBabelInterop = new WeakMap();\n  var cacheNodeInterop = new WeakMap();\n  return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) {\n    return nodeInterop ? cacheNodeInterop : cacheBabelInterop;\n  })(nodeInterop);\n}\n\nfunction _interopRequireWildcard(obj, nodeInterop) {\n  if (!nodeInterop && obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache(nodeInterop);\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj[\"default\"] = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nvar ENS_NOT_FOUND = 'ENS name not found';\n\nfunction Address(props) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      resolvedAddress = _useState2[0],\n      setResolvedAddress = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(''),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      inputValue = _useState4[0],\n      setInputValue = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      isResolvingInProgress = _useState6[0],\n      setIsResolvingInProgress = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(null),\n      _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n      ENS = _useState10[0],\n      setENS = _useState10[1];\n\n  var currentInput = (0, _react.useRef)();\n\n  var inputDebouncerHandler = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(input) {\n      var result, address, type, name;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return resolveName(input);\n\n            case 3:\n              result = _context.sent;\n\n              if (input === currentInput.current) {\n                setError(null);\n                address = result.address, type = result.type, name = result.name;\n\n                if (type === _address.ETH_ADDRESS_TYPE.name) {\n                  setResolvedAddress(address);\n                } else if (type === _address.ETH_ADDRESS_TYPE.address) {\n                  setResolvedAddress(name);\n                }\n\n                props.onResolve(result);\n                props.onError(null);\n              } //if newest continue, otherwise ignore\n\n\n              _context.next = 13;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              setError(_context.t0.toString());\n              setResolvedAddress(null);\n              props.onResolve({\n                address: input,\n                name: null,\n                type: null\n              });\n              props.onError(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function inputDebouncerHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var inputDebouncer = _lodash[\"default\"].debounce(inputDebouncerHandler, 500);\n\n  (0, _react.useEffect)(function () {\n    function setup() {\n      return _setup.apply(this, arguments);\n    }\n\n    function _setup() {\n      _setup = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var options, _yield$setupENS, ens;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = {};\n\n                if (props.ensAddress) {\n                  options.ensAddress = props.ensAddress;\n                }\n\n                if (props.provider) {\n                  options.customProvider = props.provider;\n                }\n\n                _context2.next = 5;\n                return (0, _ens.setup)(options);\n\n              case 5:\n                _yield$setupENS = _context2.sent;\n                ens = _yield$setupENS.ens;\n                setENS(ens);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _setup.apply(this, arguments);\n    }\n\n    setup();\n  }, [props.provider]);\n  var handleInput = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(address) {\n      return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!address || address.length === 0) {\n                setInputValue('');\n                setError(null);\n                setResolvedAddress(null);\n\n                if (inputDebouncer) {\n                  inputDebouncer.cancel();\n                }\n              }\n\n              setInputValue(address);\n\n              if (inputDebouncer) {\n                inputDebouncer(address);\n              }\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [inputDebouncer]);\n  (0, _react.useEffect)(function () {\n    if (props.presetValue.length !== 0) {\n      handleInput(props.presetValue);\n    }\n  }, [props.presetValue, handleInput]);\n\n  if (!ENS) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n      className: \"loader\"\n    });\n  }\n\n  var handleResolver = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(fn) {\n      return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              setIsResolvingInProgress(true);\n              setResolvedAddress(null);\n              _context4.next = 5;\n              return fn();\n\n            case 5:\n              return _context4.abrupt(\"return\", _context4.sent);\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](0);\n\n              if (!(_context4.t0 && _context4.t0.message && _context4.t0.message === ENS_NOT_FOUND)) {\n                _context4.next = 12;\n                break;\n              }\n\n              return _context4.abrupt(\"return\");\n\n            case 12:\n              throw _context4.t0;\n\n            case 13:\n              _context4.prev = 13;\n              setIsResolvingInProgress(false);\n              return _context4.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 8, 13, 16]]);\n    }));\n\n    return function handleResolver(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var resolveName = /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(inputValue) {\n      var addressType;\n      return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // update latest input resolving\n              currentInput.current = inputValue;\n              addressType = (0, _address.getEthAddressType)(inputValue);\n\n              if (!(addressType === _address.ETH_ADDRESS_TYPE.name)) {\n                _context7.next = 8;\n                break;\n              }\n\n              _context7.next = 5;\n              return handleResolver( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n                return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        _context5.t0 = inputValue;\n                        _context5.next = 3;\n                        return ENS.getAddress(inputValue);\n\n                      case 3:\n                        _context5.t1 = _context5.sent;\n                        _context5.t2 = inputValue;\n                        return _context5.abrupt(\"return\", {\n                          input: _context5.t0,\n                          address: _context5.t1,\n                          name: _context5.t2,\n                          type: 'name'\n                        });\n\n                      case 6:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }\n                }, _callee5);\n              })));\n\n            case 5:\n              return _context7.abrupt(\"return\", _context7.sent);\n\n            case 8:\n              if (!(addressType === _address.ETH_ADDRESS_TYPE.address)) {\n                _context7.next = 12;\n                break;\n              }\n\n              _context7.next = 11;\n              return handleResolver( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6() {\n                return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        _context6.t0 = inputValue;\n                        _context6.next = 3;\n                        return ENS.getName(inputValue);\n\n                      case 3:\n                        _context6.t1 = _context6.sent.name;\n                        _context6.t2 = inputValue;\n                        return _context6.abrupt(\"return\", {\n                          input: _context6.t0,\n                          name: _context6.t1,\n                          address: _context6.t2,\n                          type: 'address'\n                        });\n\n                      case 6:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6);\n              })));\n\n            case 11:\n              return _context7.abrupt(\"return\", _context7.sent);\n\n            case 12:\n              throw 'Incorrect address or name';\n\n            case 13:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function resolveName(_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var isResolveNameNotFound = function isResolveNameNotFound() {\n    return !resolvedAddress && inputValue && !isResolvingInProgress && (0, _address.getEthAddressType)(inputValue) !== _address.ETH_ADDRESS_TYPE.address;\n  };\n\n  var showBlockies = function showBlockies() {\n    if (props.showBlockies) {\n      var address;\n\n      if ((0, _address.isAddress)(inputValue)) {\n        address = inputValue;\n      } else if ((0, _address.isAddress)(resolvedAddress)) {\n        address = resolvedAddress;\n      }\n\n      if (address) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_Blockies.SingleNameBlockies, {\n          address: address.toLowerCase(),\n          imageSize: 30,\n          className: \"blockies\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"cmp-address-wrapper \".concat(props.className)\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"cmp-address  \".concat(resolvedAddress ? 'resolved' : '', \" \").concat(error ? 'error' : '')\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"input-wrapper\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"indicator\"\n  }, isResolvingInProgress && /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n    className: \"loader\"\n  }), !isResolvingInProgress && showBlockies(), isResolveNameNotFound() && /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    alt: \"warning icon\",\n    src: _warning[\"default\"],\n    className: \"icon-wrapper error-icon\"\n  }), props.DefaultIcon && !inputValue && /*#__PURE__*/_react[\"default\"].createElement(DefaultIcon, null)), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n    value: inputValue,\n    onChange: function onChange(e) {\n      return handleInput(e.currentTarget.value);\n    },\n    placeholder: props.placeholder,\n    spellCheck: false,\n    name: \"ethereum\"\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"info-wrapper\"\n  }, resolvedAddress && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"resolved\"\n  }, resolvedAddress))));\n}\n\nAddress.propTypes = {\n  provider: _propTypes[\"default\"].object.isRequired,\n  placeholder: _propTypes[\"default\"].string,\n  showBlockies: _propTypes[\"default\"].bool,\n  DefaultIcon: function DefaultIcon(props, propName) {\n    if (props[propName] && !(0, _react.isValidElementType)(props[propName])) {\n      return new Error(\"Invalid prop 'component' supplied to 'Route': the prop is not a valid React component\");\n    }\n  },\n  onError: _propTypes[\"default\"].func,\n  onResolve: _propTypes[\"default\"].func,\n  className: _propTypes[\"default\"].string\n};\nAddress.defaultProps = {\n  presetValue: '',\n  placeholder: 'Enter Ethereum name or address',\n  showBlockies: true,\n  DefaultIcon: null,\n  className: '',\n  onError: function onError() {},\n  onResolve: function onResolve() {}\n};\nvar _default = Address;\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/karel/Documents/eth/my-eth-app/node_modules/@ensdomains/react-ens-address/dist/Address.js"],"names":["_interopRequireDefault","require","_typeof","Object","defineProperty","exports","value","_regenerator","_asyncToGenerator2","_slicedToArray2","_react","_interopRequireWildcard","_propTypes","_ens","_lodash","_address","_Loader","_Blockies","_warning","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","obj","__esModule","cache","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","ENS_NOT_FOUND","Address","props","_useState","useState","_useState2","resolvedAddress","setResolvedAddress","_useState3","_useState4","inputValue","setInputValue","_useState5","_useState6","isResolvingInProgress","setIsResolvingInProgress","_useState7","_useState8","error","setError","_useState9","_useState10","ENS","setENS","currentInput","useRef","inputDebouncerHandler","_ref","mark","_callee","input","result","address","type","name","wrap","_callee$","_context","prev","next","resolveName","sent","current","ETH_ADDRESS_TYPE","onResolve","onError","t0","toString","stop","_x","apply","arguments","inputDebouncer","debounce","useEffect","setup","_setup","_callee2","options","_yield$setupENS","ens","_callee2$","_context2","ensAddress","provider","customProvider","handleInput","useCallback","_ref2","_callee3","_callee3$","_context3","length","cancel","_x2","presetValue","createElement","className","handleResolver","_ref3","_callee4","fn","_callee4$","_context4","abrupt","message","finish","_x3","_ref4","_callee7","addressType","_callee7$","_context7","getEthAddressType","_callee5","_callee5$","_context5","getAddress","t1","t2","_callee6","_callee6$","_context6","getName","_x4","isResolveNameNotFound","showBlockies","isAddress","SingleNameBlockies","toLowerCase","imageSize","concat","alt","src","DefaultIcon","onChange","e","currentTarget","placeholder","spellCheck","propTypes","object","isRequired","string","bool","propName","isValidElementType","Error","func","defaultProps","_default"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEA,IAAIC,OAAO,GAAGD,OAAO,CAAC,+BAAD,CAArB;;AAEAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAAC,SAAD,CAAP,GAAqB,KAAK,CAA1B;;AAEA,IAAIE,YAAY,GAAGP,sBAAsB,CAACC,OAAO,CAAC,4BAAD,CAAR,CAAzC;;AAEA,IAAIO,kBAAkB,GAAGR,sBAAsB,CAACC,OAAO,CAAC,yCAAD,CAAR,CAA/C;;AAEA,IAAIQ,eAAe,GAAGT,sBAAsB,CAACC,OAAO,CAAC,sCAAD,CAAR,CAA5C;;AAEA,IAAIS,MAAM,GAAGC,uBAAuB,CAACV,OAAO,CAAC,OAAD,CAAR,CAApC;;AAEA,IAAIW,UAAU,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,YAAD,CAAR,CAAvC;;AAEA,IAAIY,IAAI,GAAGZ,OAAO,CAAC,OAAD,CAAlB;;AAEA,IAAIa,OAAO,GAAGd,sBAAsB,CAACC,OAAO,CAAC,QAAD,CAAR,CAApC;;AAEA,IAAIc,QAAQ,GAAGd,OAAO,CAAC,oBAAD,CAAtB;;AAEA,IAAIe,OAAO,GAAGhB,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAApC;;AAEA,IAAIgB,SAAS,GAAGhB,OAAO,CAAC,eAAD,CAAvB;;AAEA,IAAIiB,QAAQ,GAAGlB,sBAAsB,CAACC,OAAO,CAAC,sBAAD,CAAR,CAArC;;AAEAA,OAAO,CAAC,aAAD,CAAP;;AAEA,SAASkB,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,MAAI,OAAOC,OAAP,KAAmB,UAAvB,EAAmC,OAAO,IAAP;AAAa,MAAIC,iBAAiB,GAAG,IAAID,OAAJ,EAAxB;AAAuC,MAAIE,gBAAgB,GAAG,IAAIF,OAAJ,EAAvB;AAAsC,SAAO,CAACF,wBAAwB,GAAG,SAASA,wBAAT,CAAkCC,WAAlC,EAA+C;AAAE,WAAOA,WAAW,GAAGG,gBAAH,GAAsBD,iBAAxC;AAA4D,GAAzI,EAA2IF,WAA3I,CAAP;AAAiK;;AAE/U,SAAST,uBAAT,CAAiCa,GAAjC,EAAsCJ,WAAtC,EAAmD;AAAE,MAAI,CAACA,WAAD,IAAgBI,GAAhB,IAAuBA,GAAG,CAACC,UAA/B,EAA2C;AAAE,WAAOD,GAAP;AAAa;;AAAC,MAAIA,GAAG,KAAK,IAAR,IAAgBtB,OAAO,CAACsB,GAAD,CAAP,KAAiB,QAAjB,IAA6B,OAAOA,GAAP,KAAe,UAAhE,EAA4E;AAAE,WAAO;AAAE,iBAAWA;AAAb,KAAP;AAA4B;;AAAC,MAAIE,KAAK,GAAGP,wBAAwB,CAACC,WAAD,CAApC;;AAAmD,MAAIM,KAAK,IAAIA,KAAK,CAACC,GAAN,CAAUH,GAAV,CAAb,EAA6B;AAAE,WAAOE,KAAK,CAACE,GAAN,CAAUJ,GAAV,CAAP;AAAwB;;AAAC,MAAIK,MAAM,GAAG,EAAb;AAAiB,MAAIC,qBAAqB,GAAG3B,MAAM,CAACC,cAAP,IAAyBD,MAAM,CAAC4B,wBAA5D;;AAAsF,OAAK,IAAIC,GAAT,IAAgBR,GAAhB,EAAqB;AAAE,QAAIQ,GAAG,KAAK,SAAR,IAAqB7B,MAAM,CAAC8B,SAAP,CAAiBC,cAAjB,CAAgCC,IAAhC,CAAqCX,GAArC,EAA0CQ,GAA1C,CAAzB,EAAyE;AAAE,UAAII,IAAI,GAAGN,qBAAqB,GAAG3B,MAAM,CAAC4B,wBAAP,CAAgCP,GAAhC,EAAqCQ,GAArC,CAAH,GAA+C,IAA/E;;AAAqF,UAAII,IAAI,KAAKA,IAAI,CAACR,GAAL,IAAYQ,IAAI,CAACC,GAAtB,CAAR,EAAoC;AAAElC,QAAAA,MAAM,CAACC,cAAP,CAAsByB,MAAtB,EAA8BG,GAA9B,EAAmCI,IAAnC;AAA2C,OAAjF,MAAuF;AAAEP,QAAAA,MAAM,CAACG,GAAD,CAAN,GAAcR,GAAG,CAACQ,GAAD,CAAjB;AAAyB;AAAE;AAAE;;AAACH,EAAAA,MAAM,CAAC,SAAD,CAAN,GAAoBL,GAApB;;AAAyB,MAAIE,KAAJ,EAAW;AAAEA,IAAAA,KAAK,CAACW,GAAN,CAAUb,GAAV,EAAeK,MAAf;AAAyB;;AAAC,SAAOA,MAAP;AAAgB;;AAE3yB,IAAIS,aAAa,GAAG,oBAApB;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AACtB,MAAIC,SAAS,GAAG,CAAC,GAAG/B,MAAM,CAACgC,QAAX,EAAqB,IAArB,CAAhB;AAAA,MACIC,UAAU,GAAG,CAAC,GAAGlC,eAAe,CAAC,SAAD,CAAnB,EAAgCgC,SAAhC,EAA2C,CAA3C,CADjB;AAAA,MAEIG,eAAe,GAAGD,UAAU,CAAC,CAAD,CAFhC;AAAA,MAGIE,kBAAkB,GAAGF,UAAU,CAAC,CAAD,CAHnC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGpC,MAAM,CAACgC,QAAX,EAAqB,EAArB,CAAjB;AAAA,MACIK,UAAU,GAAG,CAAC,GAAGtC,eAAe,CAAC,SAAD,CAAnB,EAAgCqC,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,UAAU,GAAGD,UAAU,CAAC,CAAD,CAF3B;AAAA,MAGIE,aAAa,GAAGF,UAAU,CAAC,CAAD,CAH9B;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGxC,MAAM,CAACgC,QAAX,EAAqB,KAArB,CAAjB;AAAA,MACIS,UAAU,GAAG,CAAC,GAAG1C,eAAe,CAAC,SAAD,CAAnB,EAAgCyC,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,qBAAqB,GAAGD,UAAU,CAAC,CAAD,CAFtC;AAAA,MAGIE,wBAAwB,GAAGF,UAAU,CAAC,CAAD,CAHzC;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAG5C,MAAM,CAACgC,QAAX,EAAqB,IAArB,CAAjB;AAAA,MACIa,UAAU,GAAG,CAAC,GAAG9C,eAAe,CAAC,SAAD,CAAnB,EAAgC6C,UAAhC,EAA4C,CAA5C,CADjB;AAAA,MAEIE,KAAK,GAAGD,UAAU,CAAC,CAAD,CAFtB;AAAA,MAGIE,QAAQ,GAAGF,UAAU,CAAC,CAAD,CAHzB;;AAKA,MAAIG,UAAU,GAAG,CAAC,GAAGhD,MAAM,CAACgC,QAAX,EAAqB,IAArB,CAAjB;AAAA,MACIiB,WAAW,GAAG,CAAC,GAAGlD,eAAe,CAAC,SAAD,CAAnB,EAAgCiD,UAAhC,EAA4C,CAA5C,CADlB;AAAA,MAEIE,GAAG,GAAGD,WAAW,CAAC,CAAD,CAFrB;AAAA,MAGIE,MAAM,GAAGF,WAAW,CAAC,CAAD,CAHxB;;AAKA,MAAIG,YAAY,GAAG,CAAC,GAAGpD,MAAM,CAACqD,MAAX,GAAnB;;AAEA,MAAIC,qBAAqB,GAAG,aAAa,YAAY;AACnD,QAAIC,IAAI,GAAG,CAAC,GAAGzD,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAC/G,UAAIC,MAAJ,EAAYC,OAAZ,EAAqBC,IAArB,EAA2BC,IAA3B;AACA,aAAOjE,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAASC,QAAT,CAAkBC,QAAlB,EAA4B;AAC9D,eAAO,CAAP,EAAU;AACR,kBAAQA,QAAQ,CAACC,IAAT,GAAgBD,QAAQ,CAACE,IAAjC;AACE,iBAAK,CAAL;AACEF,cAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,cAAAA,QAAQ,CAACE,IAAT,GAAgB,CAAhB;AACA,qBAAOC,WAAW,CAACV,KAAD,CAAlB;;AAEF,iBAAK,CAAL;AACEC,cAAAA,MAAM,GAAGM,QAAQ,CAACI,IAAlB;;AAEA,kBAAIX,KAAK,KAAKN,YAAY,CAACkB,OAA3B,EAAoC;AAClCvB,gBAAAA,QAAQ,CAAC,IAAD,CAAR;AACAa,gBAAAA,OAAO,GAAGD,MAAM,CAACC,OAAjB,EAA0BC,IAAI,GAAGF,MAAM,CAACE,IAAxC,EAA8CC,IAAI,GAAGH,MAAM,CAACG,IAA5D;;AAEA,oBAAID,IAAI,KAAKxD,QAAQ,CAACkE,gBAAT,CAA0BT,IAAvC,EAA6C;AAC3C3B,kBAAAA,kBAAkB,CAACyB,OAAD,CAAlB;AACD,iBAFD,MAEO,IAAIC,IAAI,KAAKxD,QAAQ,CAACkE,gBAAT,CAA0BX,OAAvC,EAAgD;AACrDzB,kBAAAA,kBAAkB,CAAC2B,IAAD,CAAlB;AACD;;AAEDhC,gBAAAA,KAAK,CAAC0C,SAAN,CAAgBb,MAAhB;AACA7B,gBAAAA,KAAK,CAAC2C,OAAN,CAAc,IAAd;AACD,eAfH,CAeI;;;AAGFR,cAAAA,QAAQ,CAACE,IAAT,GAAgB,EAAhB;AACA;;AAEF,iBAAK,CAAL;AACEF,cAAAA,QAAQ,CAACC,IAAT,GAAgB,CAAhB;AACAD,cAAAA,QAAQ,CAACS,EAAT,GAAcT,QAAQ,CAAC,OAAD,CAAR,CAAkB,CAAlB,CAAd;AACAlB,cAAAA,QAAQ,CAACkB,QAAQ,CAACS,EAAT,CAAYC,QAAZ,EAAD,CAAR;AACAxC,cAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACAL,cAAAA,KAAK,CAAC0C,SAAN,CAAgB;AACdZ,gBAAAA,OAAO,EAAEF,KADK;AAEdI,gBAAAA,IAAI,EAAE,IAFQ;AAGdD,gBAAAA,IAAI,EAAE;AAHQ,eAAhB;AAKA/B,cAAAA,KAAK,CAAC2C,OAAN,CAAcR,QAAQ,CAACS,EAAvB;;AAEF,iBAAK,EAAL;AACA,iBAAK,KAAL;AACE,qBAAOT,QAAQ,CAACW,IAAT,EAAP;AAzCJ;AA2CD;AACF,OA9CM,EA8CJnB,OA9CI,EA8CK,IA9CL,EA8CW,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,CA9CX,CAAP;AA+CD,KAjD2D,CAAjD,CAAX;;AAmDA,WAAO,SAASH,qBAAT,CAA+BuB,EAA/B,EAAmC;AACxC,aAAOtB,IAAI,CAACuB,KAAL,CAAW,IAAX,EAAiBC,SAAjB,CAAP;AACD,KAFD;AAGD,GAvDwC,EAAzC;;AAyDA,MAAIC,cAAc,GAAG5E,OAAO,CAAC,SAAD,CAAP,CAAmB6E,QAAnB,CAA4B3B,qBAA5B,EAAmD,GAAnD,CAArB;;AAEA,GAAC,GAAGtD,MAAM,CAACkF,SAAX,EAAsB,YAAY;AAChC,aAASC,KAAT,GAAiB;AACf,aAAOC,MAAM,CAACN,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAP;AACD;;AAED,aAASK,MAAT,GAAkB;AAChBA,MAAAA,MAAM,GAAG,CAAC,GAAGtF,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAAS6B,QAAT,GAAoB;AACzG,YAAIC,OAAJ,EAAaC,eAAb,EAA8BC,GAA9B;;AAEA,eAAO3F,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAAS0B,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,iBAAO,CAAP,EAAU;AACR,oBAAQA,SAAS,CAACxB,IAAV,GAAiBwB,SAAS,CAACvB,IAAnC;AACE,mBAAK,CAAL;AACEmB,gBAAAA,OAAO,GAAG,EAAV;;AAEA,oBAAIxD,KAAK,CAAC6D,UAAV,EAAsB;AACpBL,kBAAAA,OAAO,CAACK,UAAR,GAAqB7D,KAAK,CAAC6D,UAA3B;AACD;;AAED,oBAAI7D,KAAK,CAAC8D,QAAV,EAAoB;AAClBN,kBAAAA,OAAO,CAACO,cAAR,GAAyB/D,KAAK,CAAC8D,QAA/B;AACD;;AAEDF,gBAAAA,SAAS,CAACvB,IAAV,GAAiB,CAAjB;AACA,uBAAO,CAAC,GAAGhE,IAAI,CAACgF,KAAT,EAAgBG,OAAhB,CAAP;;AAEF,mBAAK,CAAL;AACEC,gBAAAA,eAAe,GAAGG,SAAS,CAACrB,IAA5B;AACAmB,gBAAAA,GAAG,GAAGD,eAAe,CAACC,GAAtB;AACArC,gBAAAA,MAAM,CAACqC,GAAD,CAAN;;AAEF,mBAAK,CAAL;AACA,mBAAK,KAAL;AACE,uBAAOE,SAAS,CAACd,IAAV,EAAP;AAtBJ;AAwBD;AACF,SA3BM,EA2BJS,QA3BI,CAAP;AA4BD,OA/ByD,CAAjD,CAAT;AAgCA,aAAOD,MAAM,CAACN,KAAP,CAAa,IAAb,EAAmBC,SAAnB,CAAP;AACD;;AAEDI,IAAAA,KAAK;AACN,GA1CD,EA0CG,CAACrD,KAAK,CAAC8D,QAAP,CA1CH;AA2CA,MAAIE,WAAW,GAAG,CAAC,GAAG9F,MAAM,CAAC+F,WAAX,GAAyB,aAAa,YAAY;AAClE,QAAIC,KAAK,GAAG,CAAC,GAAGlG,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAASyC,QAAT,CAAkBrC,OAAlB,EAA2B;AACnH,aAAO/D,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAASmC,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAACjC,IAAV,GAAiBiC,SAAS,CAAChC,IAAnC;AACE,iBAAK,CAAL;AACE,kBAAI,CAACP,OAAD,IAAYA,OAAO,CAACwC,MAAR,KAAmB,CAAnC,EAAsC;AACpC7D,gBAAAA,aAAa,CAAC,EAAD,CAAb;AACAQ,gBAAAA,QAAQ,CAAC,IAAD,CAAR;AACAZ,gBAAAA,kBAAkB,CAAC,IAAD,CAAlB;;AAEA,oBAAI6C,cAAJ,EAAoB;AAClBA,kBAAAA,cAAc,CAACqB,MAAf;AACD;AACF;;AAED9D,cAAAA,aAAa,CAACqB,OAAD,CAAb;;AAEA,kBAAIoB,cAAJ,EAAoB;AAClBA,gBAAAA,cAAc,CAACpB,OAAD,CAAd;AACD;;AAEH,iBAAK,CAAL;AACA,iBAAK,KAAL;AACE,qBAAOuC,SAAS,CAACvB,IAAV,EAAP;AApBJ;AAsBD;AACF,OAzBM,EAyBJqB,QAzBI,CAAP;AA0BD,KA3B4D,CAAjD,CAAZ;;AA6BA,WAAO,UAAUK,GAAV,EAAe;AACpB,aAAON,KAAK,CAAClB,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAAP;AACD,KAFD;AAGD,GAjCuD,EAAtC,EAiCb,CAACC,cAAD,CAjCa,CAAlB;AAkCA,GAAC,GAAGhF,MAAM,CAACkF,SAAX,EAAsB,YAAY;AAChC,QAAIpD,KAAK,CAACyE,WAAN,CAAkBH,MAAlB,KAA6B,CAAjC,EAAoC;AAClCN,MAAAA,WAAW,CAAChE,KAAK,CAACyE,WAAP,CAAX;AACD;AACF,GAJD,EAIG,CAACzE,KAAK,CAACyE,WAAP,EAAoBT,WAApB,CAJH;;AAMA,MAAI,CAAC5C,GAAL,EAAU;AACR,WAAO,aAAalD,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgClG,OAAO,CAAC,SAAD,CAAvC,EAAoD;AACtEmG,MAAAA,SAAS,EAAE;AAD2D,KAApD,CAApB;AAGD;;AAED,MAAIC,cAAc,GAAG,aAAa,YAAY;AAC5C,QAAIC,KAAK,GAAG,CAAC,GAAG7G,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAASoD,QAAT,CAAkBC,EAAlB,EAAsB;AAC9G,aAAOhH,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAAS+C,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAAC7C,IAAV,GAAiB6C,SAAS,CAAC5C,IAAnC;AACE,iBAAK,CAAL;AACE4C,cAAAA,SAAS,CAAC7C,IAAV,GAAiB,CAAjB;AACAvB,cAAAA,wBAAwB,CAAC,IAAD,CAAxB;AACAR,cAAAA,kBAAkB,CAAC,IAAD,CAAlB;AACA4E,cAAAA,SAAS,CAAC5C,IAAV,GAAiB,CAAjB;AACA,qBAAO0C,EAAE,EAAT;;AAEF,iBAAK,CAAL;AACE,qBAAOE,SAAS,CAACC,MAAV,CAAiB,QAAjB,EAA2BD,SAAS,CAAC1C,IAArC,CAAP;;AAEF,iBAAK,CAAL;AACE0C,cAAAA,SAAS,CAAC7C,IAAV,GAAiB,CAAjB;AACA6C,cAAAA,SAAS,CAACrC,EAAV,GAAeqC,SAAS,CAAC,OAAD,CAAT,CAAmB,CAAnB,CAAf;;AAEA,kBAAI,EAAEA,SAAS,CAACrC,EAAV,IAAgBqC,SAAS,CAACrC,EAAV,CAAauC,OAA7B,IAAwCF,SAAS,CAACrC,EAAV,CAAauC,OAAb,KAAyBrF,aAAnE,CAAJ,EAAuF;AACrFmF,gBAAAA,SAAS,CAAC5C,IAAV,GAAiB,EAAjB;AACA;AACD;;AAED,qBAAO4C,SAAS,CAACC,MAAV,CAAiB,QAAjB,CAAP;;AAEF,iBAAK,EAAL;AACE,oBAAMD,SAAS,CAACrC,EAAhB;;AAEF,iBAAK,EAAL;AACEqC,cAAAA,SAAS,CAAC7C,IAAV,GAAiB,EAAjB;AACAvB,cAAAA,wBAAwB,CAAC,KAAD,CAAxB;AACA,qBAAOoE,SAAS,CAACG,MAAV,CAAiB,EAAjB,CAAP;;AAEF,iBAAK,EAAL;AACA,iBAAK,KAAL;AACE,qBAAOH,SAAS,CAACnC,IAAV,EAAP;AAhCJ;AAkCD;AACF,OArCM,EAqCJgC,QArCI,EAqCM,IArCN,EAqCY,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,EAAW,EAAX,CAAD,CArCZ,CAAP;AAsCD,KAvC4D,CAAjD,CAAZ;;AAyCA,WAAO,SAASF,cAAT,CAAwBS,GAAxB,EAA6B;AAClC,aAAOR,KAAK,CAAC7B,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAAP;AACD,KAFD;AAGD,GA7CiC,EAAlC;;AA+CA,MAAIX,WAAW,GAAG,aAAa,YAAY;AACzC,QAAIgD,KAAK,GAAG,CAAC,GAAGtH,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAAS6D,QAAT,CAAkB/E,UAAlB,EAA8B;AACtH,UAAIgF,WAAJ;AACA,aAAOzH,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAASwD,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,eAAO,CAAP,EAAU;AACR,kBAAQA,SAAS,CAACtD,IAAV,GAAiBsD,SAAS,CAACrD,IAAnC;AACE,iBAAK,CAAL;AACE;AACAf,cAAAA,YAAY,CAACkB,OAAb,GAAuBhC,UAAvB;AACAgF,cAAAA,WAAW,GAAG,CAAC,GAAGjH,QAAQ,CAACoH,iBAAb,EAAgCnF,UAAhC,CAAd;;AAEA,kBAAI,EAAEgF,WAAW,KAAKjH,QAAQ,CAACkE,gBAAT,CAA0BT,IAA5C,CAAJ,EAAuD;AACrD0D,gBAAAA,SAAS,CAACrD,IAAV,GAAiB,CAAjB;AACA;AACD;;AAEDqD,cAAAA,SAAS,CAACrD,IAAV,GAAiB,CAAjB;AACA,qBAAOuC,cAAc,EAAE,aAAa,CAAC,GAAG5G,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAASkE,QAAT,GAAoB;AACpI,uBAAO7H,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAAS4D,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,yBAAO,CAAP,EAAU;AACR,4BAAQA,SAAS,CAAC1D,IAAV,GAAiB0D,SAAS,CAACzD,IAAnC;AACE,2BAAK,CAAL;AACEyD,wBAAAA,SAAS,CAAClD,EAAV,GAAepC,UAAf;AACAsF,wBAAAA,SAAS,CAACzD,IAAV,GAAiB,CAAjB;AACA,+BAAOjB,GAAG,CAAC2E,UAAJ,CAAevF,UAAf,CAAP;;AAEF,2BAAK,CAAL;AACEsF,wBAAAA,SAAS,CAACE,EAAV,GAAeF,SAAS,CAACvD,IAAzB;AACAuD,wBAAAA,SAAS,CAACG,EAAV,GAAezF,UAAf;AACA,+BAAOsF,SAAS,CAACZ,MAAV,CAAiB,QAAjB,EAA2B;AAChCtD,0BAAAA,KAAK,EAAEkE,SAAS,CAAClD,EADe;AAEhCd,0BAAAA,OAAO,EAAEgE,SAAS,CAACE,EAFa;AAGhChE,0BAAAA,IAAI,EAAE8D,SAAS,CAACG,EAHgB;AAIhClE,0BAAAA,IAAI,EAAE;AAJ0B,yBAA3B,CAAP;;AAOF,2BAAK,CAAL;AACA,2BAAK,KAAL;AACE,+BAAO+D,SAAS,CAAChD,IAAV,EAAP;AAlBJ;AAoBD;AACF,iBAvBM,EAuBJ8C,QAvBI,CAAP;AAwBD,eAzBoF,CAAjD,CAAf,CAArB;;AA2BF,iBAAK,CAAL;AACE,qBAAOF,SAAS,CAACR,MAAV,CAAiB,QAAjB,EAA2BQ,SAAS,CAACnD,IAArC,CAAP;;AAEF,iBAAK,CAAL;AACE,kBAAI,EAAEiD,WAAW,KAAKjH,QAAQ,CAACkE,gBAAT,CAA0BX,OAA5C,CAAJ,EAA0D;AACxD4D,gBAAAA,SAAS,CAACrD,IAAV,GAAiB,EAAjB;AACA;AACD;;AAEDqD,cAAAA,SAAS,CAACrD,IAAV,GAAiB,EAAjB;AACA,qBAAOuC,cAAc,EAAE,aAAa,CAAC,GAAG5G,kBAAkB,CAAC,SAAD,CAAtB,GAAoC,aAAaD,YAAY,CAAC,SAAD,CAAZ,CAAwB2D,IAAxB,CAA6B,SAASwE,QAAT,GAAoB;AACpI,uBAAOnI,YAAY,CAAC,SAAD,CAAZ,CAAwBkE,IAAxB,CAA6B,SAASkE,SAAT,CAAmBC,SAAnB,EAA8B;AAChE,yBAAO,CAAP,EAAU;AACR,4BAAQA,SAAS,CAAChE,IAAV,GAAiBgE,SAAS,CAAC/D,IAAnC;AACE,2BAAK,CAAL;AACE+D,wBAAAA,SAAS,CAACxD,EAAV,GAAepC,UAAf;AACA4F,wBAAAA,SAAS,CAAC/D,IAAV,GAAiB,CAAjB;AACA,+BAAOjB,GAAG,CAACiF,OAAJ,CAAY7F,UAAZ,CAAP;;AAEF,2BAAK,CAAL;AACE4F,wBAAAA,SAAS,CAACJ,EAAV,GAAeI,SAAS,CAAC7D,IAAV,CAAeP,IAA9B;AACAoE,wBAAAA,SAAS,CAACH,EAAV,GAAezF,UAAf;AACA,+BAAO4F,SAAS,CAAClB,MAAV,CAAiB,QAAjB,EAA2B;AAChCtD,0BAAAA,KAAK,EAAEwE,SAAS,CAACxD,EADe;AAEhCZ,0BAAAA,IAAI,EAAEoE,SAAS,CAACJ,EAFgB;AAGhClE,0BAAAA,OAAO,EAAEsE,SAAS,CAACH,EAHa;AAIhClE,0BAAAA,IAAI,EAAE;AAJ0B,yBAA3B,CAAP;;AAOF,2BAAK,CAAL;AACA,2BAAK,KAAL;AACE,+BAAOqE,SAAS,CAACtD,IAAV,EAAP;AAlBJ;AAoBD;AACF,iBAvBM,EAuBJoD,QAvBI,CAAP;AAwBD,eAzBoF,CAAjD,CAAf,CAArB;;AA2BF,iBAAK,EAAL;AACE,qBAAOR,SAAS,CAACR,MAAV,CAAiB,QAAjB,EAA2BQ,SAAS,CAACnD,IAArC,CAAP;;AAEF,iBAAK,EAAL;AACE,oBAAM,2BAAN;;AAEF,iBAAK,EAAL;AACA,iBAAK,KAAL;AACE,qBAAOmD,SAAS,CAAC5C,IAAV,EAAP;AApFJ;AAsFD;AACF,OAzFM,EAyFJyC,QAzFI,CAAP;AA0FD,KA5F4D,CAAjD,CAAZ;;AA8FA,WAAO,SAASjD,WAAT,CAAqBgE,GAArB,EAA0B;AAC/B,aAAOhB,KAAK,CAACtC,KAAN,CAAY,IAAZ,EAAkBC,SAAlB,CAAP;AACD,KAFD;AAGD,GAlG8B,EAA/B;;AAoGA,MAAIsD,qBAAqB,GAAG,SAASA,qBAAT,GAAiC;AAC3D,WAAO,CAACnG,eAAD,IAAoBI,UAApB,IAAkC,CAACI,qBAAnC,IAA4D,CAAC,GAAGrC,QAAQ,CAACoH,iBAAb,EAAgCnF,UAAhC,MAAgDjC,QAAQ,CAACkE,gBAAT,CAA0BX,OAA7I;AACD,GAFD;;AAIA,MAAI0E,YAAY,GAAG,SAASA,YAAT,GAAwB;AACzC,QAAIxG,KAAK,CAACwG,YAAV,EAAwB;AACtB,UAAI1E,OAAJ;;AAEA,UAAI,CAAC,GAAGvD,QAAQ,CAACkI,SAAb,EAAwBjG,UAAxB,CAAJ,EAAyC;AACvCsB,QAAAA,OAAO,GAAGtB,UAAV;AACD,OAFD,MAEO,IAAI,CAAC,GAAGjC,QAAQ,CAACkI,SAAb,EAAwBrG,eAAxB,CAAJ,EAA8C;AACnD0B,QAAAA,OAAO,GAAG1B,eAAV;AACD;;AAED,UAAI0B,OAAJ,EAAa;AACX,eAAO,aAAa5D,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgCjG,SAAS,CAACiI,kBAA1C,EAA8D;AAChF5E,UAAAA,OAAO,EAAEA,OAAO,CAAC6E,WAAR,EADuE;AAEhFC,UAAAA,SAAS,EAAE,EAFqE;AAGhFjC,UAAAA,SAAS,EAAE;AAHqE,SAA9D,CAApB;AAKD;AACF;AACF,GAlBD;;AAoBA,SAAO,aAAazG,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACzDC,IAAAA,SAAS,EAAE,uBAAuBkC,MAAvB,CAA8B7G,KAAK,CAAC2E,SAApC;AAD8C,GAAvC,EAEjB,aAAazG,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACrDC,IAAAA,SAAS,EAAE,gBAAgBkC,MAAhB,CAAuBzG,eAAe,GAAG,UAAH,GAAgB,EAAtD,EAA0D,GAA1D,EAA+DyG,MAA/D,CAAsE7F,KAAK,GAAG,OAAH,GAAa,EAAxF;AAD0C,GAAvC,EAEb,aAAa9C,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACrDC,IAAAA,SAAS,EAAE;AAD0C,GAAvC,EAEb,aAAazG,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACrDC,IAAAA,SAAS,EAAE;AAD0C,GAAvC,EAEb/D,qBAAqB,IAAI,aAAa1C,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgClG,OAAO,CAAC,SAAD,CAAvC,EAAoD;AAC3FmG,IAAAA,SAAS,EAAE;AADgF,GAApD,CAFzB,EAIZ,CAAC/D,qBAAD,IAA0B4F,YAAY,EAJ1B,EAI8BD,qBAAqB,MAAM,aAAarI,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AAC3HoC,IAAAA,GAAG,EAAE,cADsH;AAE3HC,IAAAA,GAAG,EAAErI,QAAQ,CAAC,SAAD,CAF8G;AAG3HiG,IAAAA,SAAS,EAAE;AAHgH,GAAvC,CAJtE,EAQZ3E,KAAK,CAACgH,WAAN,IAAqB,CAACxG,UAAtB,IAAoC,aAAatC,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgCsC,WAAhC,EAA6C,IAA7C,CARrC,CAFA,EAU0F,aAAa9I,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,OAAhC,EAAyC;AAC9J5G,IAAAA,KAAK,EAAE0C,UADuJ;AAE9JyG,IAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBC,CAAlB,EAAqB;AAC7B,aAAOlD,WAAW,CAACkD,CAAC,CAACC,aAAF,CAAgBrJ,KAAjB,CAAlB;AACD,KAJ6J;AAK9JsJ,IAAAA,WAAW,EAAEpH,KAAK,CAACoH,WAL2I;AAM9JC,IAAAA,UAAU,EAAE,KANkJ;AAO9JrF,IAAAA,IAAI,EAAE;AAPwJ,GAAzC,CAVvG,CAFA,EAoBX,aAAa9D,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACvDC,IAAAA,SAAS,EAAE;AAD4C,GAAvC,EAEfvE,eAAe,IAAI,aAAalC,MAAM,CAAC,SAAD,CAAN,CAAkBwG,aAAlB,CAAgC,KAAhC,EAAuC;AACxEC,IAAAA,SAAS,EAAE;AAD6D,GAAvC,EAEhCvE,eAFgC,CAFjB,CApBF,CAFI,CAApB;AA2BD;;AAEDL,OAAO,CAACuH,SAAR,GAAoB;AAClBxD,EAAAA,QAAQ,EAAE1F,UAAU,CAAC,SAAD,CAAV,CAAsBmJ,MAAtB,CAA6BC,UADrB;AAElBJ,EAAAA,WAAW,EAAEhJ,UAAU,CAAC,SAAD,CAAV,CAAsBqJ,MAFjB;AAGlBjB,EAAAA,YAAY,EAAEpI,UAAU,CAAC,SAAD,CAAV,CAAsBsJ,IAHlB;AAIlBV,EAAAA,WAAW,EAAE,SAASA,WAAT,CAAqBhH,KAArB,EAA4B2H,QAA5B,EAAsC;AACjD,QAAI3H,KAAK,CAAC2H,QAAD,CAAL,IAAmB,CAAC,CAAC,GAAGzJ,MAAM,CAAC0J,kBAAX,EAA+B5H,KAAK,CAAC2H,QAAD,CAApC,CAAxB,EAAyE;AACvE,aAAO,IAAIE,KAAJ,CAAU,uFAAV,CAAP;AACD;AACF,GARiB;AASlBlF,EAAAA,OAAO,EAAEvE,UAAU,CAAC,SAAD,CAAV,CAAsB0J,IATb;AAUlBpF,EAAAA,SAAS,EAAEtE,UAAU,CAAC,SAAD,CAAV,CAAsB0J,IAVf;AAWlBnD,EAAAA,SAAS,EAAEvG,UAAU,CAAC,SAAD,CAAV,CAAsBqJ;AAXf,CAApB;AAaA1H,OAAO,CAACgI,YAAR,GAAuB;AACrBtD,EAAAA,WAAW,EAAE,EADQ;AAErB2C,EAAAA,WAAW,EAAE,gCAFQ;AAGrBZ,EAAAA,YAAY,EAAE,IAHO;AAIrBQ,EAAAA,WAAW,EAAE,IAJQ;AAKrBrC,EAAAA,SAAS,EAAE,EALU;AAMrBhC,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB,CAAE,CANT;AAOrBD,EAAAA,SAAS,EAAE,SAASA,SAAT,GAAqB,CAAE;AAPb,CAAvB;AASA,IAAIsF,QAAQ,GAAGjI,OAAf;AACAlC,OAAO,CAAC,SAAD,CAAP,GAAqBmK,QAArB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _typeof = require(\"@babel/runtime/helpers/typeof\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _regenerator = _interopRequireDefault(require(\"@babel/runtime/regenerator\"));\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime/helpers/asyncToGenerator\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _propTypes = _interopRequireDefault(require(\"prop-types\"));\n\nvar _ens = require(\"./ens\");\n\nvar _lodash = _interopRequireDefault(require(\"lodash\"));\n\nvar _address = require(\"./utils/address.js\");\n\nvar _Loader = _interopRequireDefault(require(\"./Loader.js\"));\n\nvar _Blockies = require(\"./Blockies.js\");\n\nvar _warning = _interopRequireDefault(require(\"./assets/warning.svg\"));\n\nrequire(\"./style.css\");\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || _typeof(obj) !== \"object\" && typeof obj !== \"function\") { return { \"default\": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj[\"default\"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nvar ENS_NOT_FOUND = 'ENS name not found';\n\nfunction Address(props) {\n  var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2[\"default\"])(_useState, 2),\n      resolvedAddress = _useState2[0],\n      setResolvedAddress = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(''),\n      _useState4 = (0, _slicedToArray2[\"default\"])(_useState3, 2),\n      inputValue = _useState4[0],\n      setInputValue = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(false),\n      _useState6 = (0, _slicedToArray2[\"default\"])(_useState5, 2),\n      isResolvingInProgress = _useState6[0],\n      setIsResolvingInProgress = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(null),\n      _useState8 = (0, _slicedToArray2[\"default\"])(_useState7, 2),\n      error = _useState8[0],\n      setError = _useState8[1];\n\n  var _useState9 = (0, _react.useState)(null),\n      _useState10 = (0, _slicedToArray2[\"default\"])(_useState9, 2),\n      ENS = _useState10[0],\n      setENS = _useState10[1];\n\n  var currentInput = (0, _react.useRef)();\n\n  var inputDebouncerHandler = /*#__PURE__*/function () {\n    var _ref = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee(input) {\n      var result, address, type, name;\n      return _regenerator[\"default\"].wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return resolveName(input);\n\n            case 3:\n              result = _context.sent;\n\n              if (input === currentInput.current) {\n                setError(null);\n                address = result.address, type = result.type, name = result.name;\n\n                if (type === _address.ETH_ADDRESS_TYPE.name) {\n                  setResolvedAddress(address);\n                } else if (type === _address.ETH_ADDRESS_TYPE.address) {\n                  setResolvedAddress(name);\n                }\n\n                props.onResolve(result);\n                props.onError(null);\n              } //if newest continue, otherwise ignore\n\n\n              _context.next = 13;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              setError(_context.t0.toString());\n              setResolvedAddress(null);\n              props.onResolve({\n                address: input,\n                name: null,\n                type: null\n              });\n              props.onError(_context.t0);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function inputDebouncerHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var inputDebouncer = _lodash[\"default\"].debounce(inputDebouncerHandler, 500);\n\n  (0, _react.useEffect)(function () {\n    function setup() {\n      return _setup.apply(this, arguments);\n    }\n\n    function _setup() {\n      _setup = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee2() {\n        var options, _yield$setupENS, ens;\n\n        return _regenerator[\"default\"].wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                options = {};\n\n                if (props.ensAddress) {\n                  options.ensAddress = props.ensAddress;\n                }\n\n                if (props.provider) {\n                  options.customProvider = props.provider;\n                }\n\n                _context2.next = 5;\n                return (0, _ens.setup)(options);\n\n              case 5:\n                _yield$setupENS = _context2.sent;\n                ens = _yield$setupENS.ens;\n                setENS(ens);\n\n              case 8:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n      return _setup.apply(this, arguments);\n    }\n\n    setup();\n  }, [props.provider]);\n  var handleInput = (0, _react.useCallback)( /*#__PURE__*/function () {\n    var _ref2 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee3(address) {\n      return _regenerator[\"default\"].wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!address || address.length === 0) {\n                setInputValue('');\n                setError(null);\n                setResolvedAddress(null);\n\n                if (inputDebouncer) {\n                  inputDebouncer.cancel();\n                }\n              }\n\n              setInputValue(address);\n\n              if (inputDebouncer) {\n                inputDebouncer(address);\n              }\n\n            case 3:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function (_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }(), [inputDebouncer]);\n  (0, _react.useEffect)(function () {\n    if (props.presetValue.length !== 0) {\n      handleInput(props.presetValue);\n    }\n  }, [props.presetValue, handleInput]);\n\n  if (!ENS) {\n    return /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n      className: \"loader\"\n    });\n  }\n\n  var handleResolver = /*#__PURE__*/function () {\n    var _ref3 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee4(fn) {\n      return _regenerator[\"default\"].wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              _context4.prev = 0;\n              setIsResolvingInProgress(true);\n              setResolvedAddress(null);\n              _context4.next = 5;\n              return fn();\n\n            case 5:\n              return _context4.abrupt(\"return\", _context4.sent);\n\n            case 8:\n              _context4.prev = 8;\n              _context4.t0 = _context4[\"catch\"](0);\n\n              if (!(_context4.t0 && _context4.t0.message && _context4.t0.message === ENS_NOT_FOUND)) {\n                _context4.next = 12;\n                break;\n              }\n\n              return _context4.abrupt(\"return\");\n\n            case 12:\n              throw _context4.t0;\n\n            case 13:\n              _context4.prev = 13;\n              setIsResolvingInProgress(false);\n              return _context4.finish(13);\n\n            case 16:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4, null, [[0, 8, 13, 16]]);\n    }));\n\n    return function handleResolver(_x3) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var resolveName = /*#__PURE__*/function () {\n    var _ref4 = (0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee7(inputValue) {\n      var addressType;\n      return _regenerator[\"default\"].wrap(function _callee7$(_context7) {\n        while (1) {\n          switch (_context7.prev = _context7.next) {\n            case 0:\n              // update latest input resolving\n              currentInput.current = inputValue;\n              addressType = (0, _address.getEthAddressType)(inputValue);\n\n              if (!(addressType === _address.ETH_ADDRESS_TYPE.name)) {\n                _context7.next = 8;\n                break;\n              }\n\n              _context7.next = 5;\n              return handleResolver( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee5() {\n                return _regenerator[\"default\"].wrap(function _callee5$(_context5) {\n                  while (1) {\n                    switch (_context5.prev = _context5.next) {\n                      case 0:\n                        _context5.t0 = inputValue;\n                        _context5.next = 3;\n                        return ENS.getAddress(inputValue);\n\n                      case 3:\n                        _context5.t1 = _context5.sent;\n                        _context5.t2 = inputValue;\n                        return _context5.abrupt(\"return\", {\n                          input: _context5.t0,\n                          address: _context5.t1,\n                          name: _context5.t2,\n                          type: 'name'\n                        });\n\n                      case 6:\n                      case \"end\":\n                        return _context5.stop();\n                    }\n                  }\n                }, _callee5);\n              })));\n\n            case 5:\n              return _context7.abrupt(\"return\", _context7.sent);\n\n            case 8:\n              if (!(addressType === _address.ETH_ADDRESS_TYPE.address)) {\n                _context7.next = 12;\n                break;\n              }\n\n              _context7.next = 11;\n              return handleResolver( /*#__PURE__*/(0, _asyncToGenerator2[\"default\"])( /*#__PURE__*/_regenerator[\"default\"].mark(function _callee6() {\n                return _regenerator[\"default\"].wrap(function _callee6$(_context6) {\n                  while (1) {\n                    switch (_context6.prev = _context6.next) {\n                      case 0:\n                        _context6.t0 = inputValue;\n                        _context6.next = 3;\n                        return ENS.getName(inputValue);\n\n                      case 3:\n                        _context6.t1 = _context6.sent.name;\n                        _context6.t2 = inputValue;\n                        return _context6.abrupt(\"return\", {\n                          input: _context6.t0,\n                          name: _context6.t1,\n                          address: _context6.t2,\n                          type: 'address'\n                        });\n\n                      case 6:\n                      case \"end\":\n                        return _context6.stop();\n                    }\n                  }\n                }, _callee6);\n              })));\n\n            case 11:\n              return _context7.abrupt(\"return\", _context7.sent);\n\n            case 12:\n              throw 'Incorrect address or name';\n\n            case 13:\n            case \"end\":\n              return _context7.stop();\n          }\n        }\n      }, _callee7);\n    }));\n\n    return function resolveName(_x4) {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  var isResolveNameNotFound = function isResolveNameNotFound() {\n    return !resolvedAddress && inputValue && !isResolvingInProgress && (0, _address.getEthAddressType)(inputValue) !== _address.ETH_ADDRESS_TYPE.address;\n  };\n\n  var showBlockies = function showBlockies() {\n    if (props.showBlockies) {\n      var address;\n\n      if ((0, _address.isAddress)(inputValue)) {\n        address = inputValue;\n      } else if ((0, _address.isAddress)(resolvedAddress)) {\n        address = resolvedAddress;\n      }\n\n      if (address) {\n        return /*#__PURE__*/_react[\"default\"].createElement(_Blockies.SingleNameBlockies, {\n          address: address.toLowerCase(),\n          imageSize: 30,\n          className: \"blockies\"\n        });\n      }\n    }\n  };\n\n  return /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"cmp-address-wrapper \".concat(props.className)\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"cmp-address  \".concat(resolvedAddress ? 'resolved' : '', \" \").concat(error ? 'error' : '')\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"input-wrapper\"\n  }, /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"indicator\"\n  }, isResolvingInProgress && /*#__PURE__*/_react[\"default\"].createElement(_Loader[\"default\"], {\n    className: \"loader\"\n  }), !isResolvingInProgress && showBlockies(), isResolveNameNotFound() && /*#__PURE__*/_react[\"default\"].createElement(\"img\", {\n    alt: \"warning icon\",\n    src: _warning[\"default\"],\n    className: \"icon-wrapper error-icon\"\n  }), props.DefaultIcon && !inputValue && /*#__PURE__*/_react[\"default\"].createElement(DefaultIcon, null)), /*#__PURE__*/_react[\"default\"].createElement(\"input\", {\n    value: inputValue,\n    onChange: function onChange(e) {\n      return handleInput(e.currentTarget.value);\n    },\n    placeholder: props.placeholder,\n    spellCheck: false,\n    name: \"ethereum\"\n  })), /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"info-wrapper\"\n  }, resolvedAddress && /*#__PURE__*/_react[\"default\"].createElement(\"div\", {\n    className: \"resolved\"\n  }, resolvedAddress))));\n}\n\nAddress.propTypes = {\n  provider: _propTypes[\"default\"].object.isRequired,\n  placeholder: _propTypes[\"default\"].string,\n  showBlockies: _propTypes[\"default\"].bool,\n  DefaultIcon: function DefaultIcon(props, propName) {\n    if (props[propName] && !(0, _react.isValidElementType)(props[propName])) {\n      return new Error(\"Invalid prop 'component' supplied to 'Route': the prop is not a valid React component\");\n    }\n  },\n  onError: _propTypes[\"default\"].func,\n  onResolve: _propTypes[\"default\"].func,\n  className: _propTypes[\"default\"].string\n};\nAddress.defaultProps = {\n  presetValue: '',\n  placeholder: 'Enter Ethereum name or address',\n  showBlockies: true,\n  DefaultIcon: null,\n  className: '',\n  onError: function onError() {},\n  onResolve: function onResolve() {}\n};\nvar _default = Address;\nexports[\"default\"] = _default;"]},"metadata":{},"sourceType":"script"}